"use strict";(self.webpackChunkweb_console=self.webpackChunkweb_console||[]).push([[428],{7111:function(e,n,t){t.d(n,{Xn:function(){return l},nL:function(){return i}});var r=t(4569),o=t.n(r),a=t(3695),c=t(390),s=t(9201);o().defaults.timeout=6e4,o().defaults.baseURL="/legal-case";var i=o().create({}),l=o().create({contentType:"application/x-www-form-urlencoded;charset=UTF-8",transformRequest:[function(e){var n="";for(var t in e)n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&";return n=n.substring(0,n.lastIndexOf("&"))}],headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}),u=o().create({headers:{"content-type":"multipart/form-data"}});function f(e){var n=(0,c.lX)();e.interceptors.request.use((function(e){return e.headers.token="token",e}),(function(e){Promise.reject(e)})),e.interceptors.response.use((function(e){var n,t=e,r=t.data.code;return r?1e4===r?t.data:(n="".concat(t.data.msg),void d(new Error(n))):t}),(function(e){var t=!1;if(e&&e.response)switch(e.response.status){case 400:e.message="\u8bf7\u6c42\u9519\u8bef";break;case 401:e.message="\u672a\u767b\u5f55\u6216\u767b\u5f55\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",t=!0;break;case 403:e.message="\u62d2\u7edd\u8bbf\u95ee";break;case 404:e.message="\u8bf7\u6c42\u5730\u5740\u51fa\u9519: ".concat(e.response.config.url);break;case 408:e.message="\u8bf7\u6c42\u8d85\u65f6";break;case 500:e.message="\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef";break;case 501:e.message="\u670d\u52a1\u672a\u5b9e\u73b0";break;case 502:e.message="\u7f51\u5173\u9519\u8bef";break;case 503:e.message="\u670d\u52a1\u4e0d\u53ef\u7528";break;case 504:e.message="\u7f51\u5173\u8d85\u65f6";break;case 505:e.message="HTTP\u7248\u672c\u4e0d\u53d7\u652f\u6301"}return d(e),t&&setTimeout((function(){sessionStorage.removeItem(s.n),n.push("/"),n.go()}),1e3),Promise.reject(e)}))}function d(e){a.ZP.error(e.message)}f(l),f(i),f(u)},697:function(e,n,t){t.d(n,{EN:function(){return l},Lc:function(){return i},R5:function(){return c},U7:function(){return a},h9:function(){return f},iE:function(){return o},iQ:function(){return s},jE:function(){return u}});var r=t(7111),o=function(e){return(0,r.nL)({url:"/case-type/list",data:e,method:"post"})},a=function(e){return(0,r.nL)({url:"/case-type/save",data:e,method:"post"})},c=function(e){return(0,r.nL)({url:"/case-type/remove",data:e,method:"post"})},s=function(e){return(0,r.nL)({url:"/case-type-definition/list",data:e,method:"post"})},i=function(e){return(0,r.nL)({url:"/case-execution/create",data:e,method:"post"})},l=function(e){return(0,r.nL)({url:"/case-execution/list",data:e,method:"post"})},u=function(e){return(0,r.nL)({url:"/case-execution/complete",data:e,method:"post"})},f=function(e){return(0,r.nL)({url:"/case-execution/handle",data:e,method:"post"})}},3428:function(e,n,t){t.r(n),t.d(n,{default:function(){return me}});var r,o=t(1413),a=t(3433),c=t(9439),s=t(2791),i=t(4942),l=t(7462),u=t(5250),f=t(1694),d=t.n(f),m=t(732),p=t(2073),g=t(7309),v=t(2571),x=t(3486),y=t(9077),Z=t(6096),C=t(9464),k=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t};(0,Z.jD)()&&document.documentElement.addEventListener("click",(function(e){r={x:e.pageX,y:e.pageY},setTimeout((function(){r=null}),100)}),!0);var h=function(e){var n,t=s.useContext(y.E_),o=t.getPopupContainer,a=t.getPrefixCls,c=t.direction,f=function(n){var t=e.onCancel;null===t||void 0===t||t(n)},Z=function(n){var t=e.onOk;null===t||void 0===t||t(n)},h=function(n){var t=e.okText,r=e.okType,o=e.cancelText,a=e.confirmLoading;return s.createElement(s.Fragment,null,s.createElement(g.Z,(0,l.Z)({onClick:f},e.cancelButtonProps),o||n.cancelText),s.createElement(g.Z,(0,l.Z)({},(0,v.n)(r),{loading:a,onClick:Z},e.okButtonProps),t||n.okText))},b=e.prefixCls,T=e.footer,w=e.visible,E=e.wrapClassName,j=e.centered,P=e.getContainer,N=e.closeIcon,I=e.focusTriggerAfterClose,S=void 0===I||I,L=k(e,["prefixCls","footer","visible","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),O=a("modal",b),F=a(),R=s.createElement(x.Z,{componentName:"Modal",defaultLocale:(0,p.A)()},h),A=s.createElement("span",{className:"".concat(O,"-close-x")},N||s.createElement(m.Z,{className:"".concat(O,"-close-icon")})),M=d()(E,(n={},(0,i.Z)(n,"".concat(O,"-centered"),!!j),(0,i.Z)(n,"".concat(O,"-wrap-rtl"),"rtl"===c),n));return s.createElement(u.Z,(0,l.Z)({},L,{getContainer:void 0===P?o:P,prefixCls:O,wrapClassName:M,footer:void 0===T?R:T,visible:w,mousePosition:r,onClose:f,closeIcon:A,focusTriggerAfterClose:S,transitionName:(0,C.mL)(F,"zoom",e.transitionName),maskTransitionName:(0,C.mL)(F,"fade",e.maskTransitionName)}))};h.defaultProps={width:520,confirmLoading:!1,visible:!1,okType:"primary"};var b=h,T=t(4699),w=t(9966),E=t(8944),j=t(1532),P=t(5796),N=t(1783),I=t(4824),S=t(4775),L=function(e){var n=e.icon,t=e.onCancel,r=e.onOk,o=e.close,a=e.zIndex,c=e.afterClose,l=e.visible,u=e.keyboard,f=e.centered,m=e.getContainer,p=e.maskStyle,g=e.okText,v=e.okButtonProps,x=e.cancelText,y=e.cancelButtonProps,Z=e.direction,k=e.prefixCls,h=e.wrapClassName,T=e.rootPrefixCls,w=e.iconPrefixCls,E=e.bodyStyle,j=e.closable,P=void 0!==j&&j,L=e.closeIcon,O=e.modalRender,F=e.focusTriggerAfterClose;(0,I.Z)(!("string"===typeof n&&n.length>2),"Modal","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(n,"` at https://ant.design/components/icon"));var R=e.okType||"primary",A="".concat(k,"-confirm"),M=!("okCancel"in e)||e.okCancel,B=e.width||416,U=e.style||{},z=void 0===e.mask||e.mask,H=void 0!==e.maskClosable&&e.maskClosable,V=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),Y=d()(A,"".concat(A,"-").concat(e.type),(0,i.Z)({},"".concat(A,"-rtl"),"rtl"===Z),e.className),_=M&&s.createElement(N.Z,{actionFn:t,close:o,autoFocus:"cancel"===V,buttonProps:y,prefixCls:"".concat(T,"-btn")},x);return s.createElement(S.ZP,{prefixCls:T,iconPrefixCls:w,direction:Z},s.createElement(b,{prefixCls:k,className:Y,wrapClassName:d()((0,i.Z)({},"".concat(A,"-centered"),!!e.centered),h),onCancel:function(){return o({triggerCancel:!0})},visible:l,title:"",footer:"",transitionName:(0,C.mL)(T,"zoom",e.transitionName),maskTransitionName:(0,C.mL)(T,"fade",e.maskTransitionName),mask:z,maskClosable:H,maskStyle:p,style:U,bodyStyle:E,width:B,zIndex:a,afterClose:c,keyboard:u,centered:f,getContainer:m,closable:P,closeIcon:L,modalRender:O,focusTriggerAfterClose:F},s.createElement("div",{className:"".concat(A,"-body-wrapper")},s.createElement("div",{className:"".concat(A,"-body")},n,void 0===e.title?null:s.createElement("span",{className:"".concat(A,"-title")},e.title),s.createElement("div",{className:"".concat(A,"-content")},e.content)),s.createElement("div",{className:"".concat(A,"-btns")},_,s.createElement(N.Z,{type:R,actionFn:r,close:o,autoFocus:"ok"===V,buttonProps:v,prefixCls:"".concat(T,"-btn")},g)))))},O=[],F=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t},R="";function A(e){var n=document.createDocumentFragment(),t=(0,l.Z)((0,l.Z)({},e),{close:a,visible:!0});function r(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var c=r.some((function(e){return e&&e.triggerCancel}));e.onCancel&&c&&e.onCancel.apply(e,r);for(var s=0;s<O.length;s++){var i=O[s];if(i===a){O.splice(s,1);break}}(0,T.v)(n)}function o(e){var t=e.okText,r=e.cancelText,o=e.prefixCls,a=F(e,["okText","cancelText","prefixCls"]);setTimeout((function(){var e=(0,p.A)(),c=(0,S.w6)(),i=c.getPrefixCls,u=c.getIconPrefixCls,f=i(void 0,R),d=o||"".concat(f,"-modal"),m=u();(0,T.s)(s.createElement(L,(0,l.Z)({},a,{prefixCls:d,rootPrefixCls:f,iconPrefixCls:m,okText:t||(a.okCancel?e.okText:e.justOkText),cancelText:r||e.cancelText})),n)}))}function a(){for(var n=this,a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];o(t=(0,l.Z)((0,l.Z)({},t),{visible:!1,afterClose:function(){"function"===typeof e.afterClose&&e.afterClose(),r.apply(n,c)}}))}return o(t),O.push(a),{destroy:a,update:function(e){o(t="function"===typeof e?e(t):(0,l.Z)((0,l.Z)({},t),e))}}}function M(e){return(0,l.Z)((0,l.Z)({icon:s.createElement(P.Z,null),okCancel:!1},e),{type:"warning"})}function B(e){return(0,l.Z)((0,l.Z)({icon:s.createElement(w.Z,null),okCancel:!1},e),{type:"info"})}function U(e){return(0,l.Z)((0,l.Z)({icon:s.createElement(E.Z,null),okCancel:!1},e),{type:"success"})}function z(e){return(0,l.Z)((0,l.Z)({icon:s.createElement(j.Z,null),okCancel:!1},e),{type:"error"})}function H(e){return(0,l.Z)((0,l.Z)({icon:s.createElement(P.Z,null),okCancel:!0},e),{type:"confirm"})}var V=t(3578),Y=function(e,n){var t=e.afterClose,r=e.config,o=s.useState(!0),a=(0,c.Z)(o,2),i=a[0],u=a[1],f=s.useState(r),d=(0,c.Z)(f,2),m=d[0],p=d[1],g=s.useContext(y.E_),v=g.direction,Z=g.getPrefixCls,C=Z("modal"),k=Z(),h=function(){u(!1);for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=n.some((function(e){return e&&e.triggerCancel}));m.onCancel&&r&&m.onCancel()};return s.useImperativeHandle(n,(function(){return{destroy:h,update:function(e){p((function(n){return(0,l.Z)((0,l.Z)({},n),e)}))}}})),s.createElement(x.Z,{componentName:"Modal",defaultLocale:V.Z.Modal},(function(e){return s.createElement(L,(0,l.Z)({prefixCls:C,rootPrefixCls:k},m,{close:h,visible:i,afterClose:t,okText:m.okText||(m.okCancel?e.okText:e.justOkText),direction:v,cancelText:m.cancelText||e.cancelText}))}))},_=s.forwardRef(Y),D=0,X=s.memo(s.forwardRef((function(e,n){var t=function(){var e=s.useState([]),n=(0,c.Z)(e,2),t=n[0],r=n[1];return[t,s.useCallback((function(e){return r((function(n){return[].concat((0,a.Z)(n),[e])})),function(){r((function(n){return n.filter((function(n){return n!==e}))}))}}),[])]}(),r=(0,c.Z)(t,2),o=r[0],i=r[1];return s.useImperativeHandle(n,(function(){return{patchElement:i}}),[]),s.createElement(s.Fragment,null,o)})));function q(e){return A(M(e))}var G=b;G.useModal=function(){var e=s.useRef(null),n=s.useState([]),t=(0,c.Z)(n,2),r=t[0],o=t[1];s.useEffect((function(){r.length&&((0,a.Z)(r).forEach((function(e){e()})),o([]))}),[r]);var i=s.useCallback((function(n){return function(t){var r;D+=1;var c,i=s.createRef(),l=s.createElement(_,{key:"modal-".concat(D),config:n(t),ref:i,afterClose:function(){c()}});return c=null===(r=e.current)||void 0===r?void 0:r.patchElement(l),{destroy:function(){function e(){var e;null===(e=i.current)||void 0===e||e.destroy()}i.current?e():o((function(n){return[].concat((0,a.Z)(n),[e])}))},update:function(e){function n(){var n;null===(n=i.current)||void 0===n||n.update(e)}i.current?n():o((function(e){return[].concat((0,a.Z)(e),[n])}))}}}}),[]);return[s.useMemo((function(){return{info:i(B),success:i(U),error:i(z),warning:i(M),confirm:i(H)}}),[]),s.createElement(X,{ref:e})]},G.info=function(e){return A(B(e))},G.success=function(e){return A(U(e))},G.error=function(e){return A(z(e))},G.warning=q,G.warn=q,G.confirm=function(e){return A(H(e))},G.destroyAll=function(){for(;O.length;){var e=O.pop();e&&e()}},G.config=function(e){var n=e.rootPrefixCls;(0,I.Z)(!1,"Modal","Modal.config is deprecated. Please use ConfigProvider.config instead."),R=n};var W=G,K=t(63),Q=t(3272),J=t(9163),$=t(6038),ee=t(6106),ne=t(914),te=t(3231),re=t(8678),oe=t(9220),ae=t(7528),ce=t(7063),se=t(697),ie=t(2426),le=t.n(ie),ue=t(1294),fe=t(184),de=K.Z.Panel,me=function(){var e=Q.Z.useForm(),n=(0,c.Z)(e,1)[0],t=(0,s.createRef)(),r=(0,s.useState)([]),i=(0,c.Z)(r,2),l=i[0],u=i[1],f=(0,s.useState)([]),d=(0,c.Z)(f,2),p=d[0],v=d[1],x=(0,s.useState)([]),y=(0,c.Z)(x,2),Z=y[0],C=y[1],k=(0,s.useState)({code:null,message:null}),h=(0,c.Z)(k,2),b=h[0],T=h[1],w=(0,s.useState)([]),E=(0,c.Z)(w,2),j=E[0],P=E[1];(0,s.useEffect)((function(){N()}),[]),(0,s.useEffect)((function(){C(p.map((function(e){return e.keyid})))}),[p]),(0,s.useEffect)((function(){t.current&&t.current.focus()}),[t]);var N=function(){(0,se.iE)({entity:{},pageNum:0,pageSize:1e3,orderBy:"id asc"}).then((function(e){P(e.rows)}))};return(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)(J.Z,{title:"\u65b0\u5efa\u6848\u4ef6",className:"site-page-header",subTitle:"\u9009\u62e9\u7c7b\u578b\u5e76\u8bbe\u7f6e\u6848\u4ef6\u4e8b\u9879\u540e\uff0c\u521b\u5efa\u6848\u4ef6",extra:[(0,fe.jsx)($.Z,{placement:"bottom",title:"\u786e\u8ba4\u4fdd\u5b58\u5417",onConfirm:function(){var e=n.getFieldValue("name")?n.getFieldValue("name").trim():"",t=n.getFieldValue("typeId")?n.getFieldValue("typeId"):null,r="";if(e&&0!==e.length||(r+="\u8bf7\u8f93\u5165\u540d\u79f0\uff1b"),null==t&&(r+="\u8bf7\u9009\u62e9\u7c7b\u578b\uff1b"),r.length>0)W.error({title:"\u9519\u8bef\u63d0\u793a",okText:"\u786e\u5b9a",content:r});else{var o={entity:{name:e,typeId:t,steps:p.filter((function(e){return e.caseTypeStepItems&&e.caseTypeStepItems.length>0}))}};(0,se.Lc)(o).then((function(e){0===e.subCode?T({code:"success",message:e.subMsg}):T({code:"error",message:e.subMsg})}))}},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,fe.jsx)(g.Z,{children:"\u8bbe\u7f6e\u5b8c\u6210\u5e76\u4fdd\u5b58"})},"1")],avatar:{src:ue},children:null==b.code?(0,fe.jsx)(Q.Z,{form:n,layout:"vertical",children:(0,fe.jsxs)(ee.Z,{gutter:16,className:"case-form-row",justify:"space-between",children:[(0,fe.jsxs)(ne.Z,{span:9,className:"case-form-area",children:[(0,fe.jsx)(Q.Z.Item,{name:"typeId",label:"\u7c7b\u578b",children:(0,fe.jsx)(te.ZP.Group,{onChange:function(e){var t=j.find((function(n){return n.id===e.target.value}));u(t.caseTypeSteps),v([]),C([]),n.setFieldsValue({name:t.name+le()().format("YYYYMMDDHHmm")})},children:j.map((function(e,n){return(0,fe.jsx)(te.ZP.Button,{value:e.id,children:e.name},e.id)}))})}),(0,fe.jsx)(Q.Z.Item,{name:"name",label:"\u540d\u79f0",children:(0,fe.jsx)(re.Z,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",maxLength:50,onFocus:function(e){return e.target.select()}})}),(0,fe.jsx)("span",{style:{fontWeight:600},children:"\u53ef\u9009\u6b65\u9aa4"}),(0,fe.jsx)("div",{className:"case-type-source-step-area",children:l.map((function(e){return(0,fe.jsx)(g.Z,{block:!0,className:"case-step-button",onClick:function(){!function(e){var n=l.find((function(n){return n.id===e}));v([].concat((0,a.Z)(p),[(0,o.Z)((0,o.Z)({},n),{},{keyid:le()().format("X")+""+p.length})]))}(e.id)},children:e.name},e.id)}))})]}),(0,fe.jsxs)(ne.Z,{span:15,className:"case-form-area",children:[(0,fe.jsx)("span",{style:{fontWeight:600},children:"\u6b65\u9aa4\u53ca\u4e8b\u9879"}),(0,fe.jsx)(K.Z,{activeKey:Z,onChange:function(e){C(e)},className:"case-form-step-data",style:{marginTop:"10px"},expandIconPosition:"left",children:p.map((function(e){return(0,fe.jsx)(de,{header:e.name,collapsible:"header",extra:(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(re.Z,{style:{width:"80%",marginRight:"20px"},placeholder:"\u5bf9\u8c61\u540d\u79f0",onChange:function(n){return t=e.keyid,r=n.target.value,void v(p.map((function(e){return e.keyid===t?(0,o.Z)((0,o.Z)({},e),{},{suspect:r}):e})));var t,r}}),(0,fe.jsx)(m.Z,{onClick:function(){return n=e.keyid,void v(p.filter((function(e){return e.keyid!==n})));var n}})]}),children:e.caseTypeStepItems&&e.caseTypeStepItems.length>0?e.caseTypeStepItems.map((function(n){return(0,fe.jsx)(oe.Z,{placement:"topLeft",title:n.lawTitle,color:"gold",arrowPointAtCenter:!0,children:(0,fe.jsx)(ae.Z,{className:"edit-tag",closable:!0,onClose:function(){return t=e.keyid,r=n.id,void v(p.map((function(e){return e.keyid===t?(0,o.Z)((0,o.Z)({},e),{},{caseTypeStepItems:e.caseTypeStepItems.filter((function(e){return e.id!==r}))}):e})));var t,r},children:n.name},n.id)},n.name)})):""},e.keyid)}))})]})]})}):(0,fe.jsx)(ce.ZP,{status:b.code,title:b.message,extra:[(0,fe.jsx)(g.Z,{onClick:function(){n.resetFields(),v([]),u([]),C([]),T({code:null,message:null})},children:"\u5173\u95ed"},"btn_"+b.code)]})})})}},9201:function(e,n,t){t.d(n,{G:function(){return o},n:function(){return r}});var r="loginUserToken",o="consoleNavigateTabs"},914:function(e,n,t){var r=t(9752);n.Z=r.Z},6106:function(e,n,t){var r=t(7545);n.Z=r.Z},1294:function(e,n,t){e.exports=t.p+"static/media/new-case.5deb2e5ace8ffe565deb.jpg"}}]);
//# sourceMappingURL=428.3e170db4.chunk.js.map