"use strict";(self.webpackChunkweb_console=self.webpackChunkweb_console||[]).push([[520],{7111:function(e,n,t){t.d(n,{Xn:function(){return l},nL:function(){return i}});var a=t(4569),r=t.n(a),o=t(3695),s=t(390),c=t(9201);r().defaults.timeout=6e4,r().defaults.baseURL="/legal-case";var i=r().create({}),l=r().create({contentType:"application/x-www-form-urlencoded;charset=UTF-8",transformRequest:[function(e){var n="";for(var t in e)n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&";return n=n.substring(0,n.lastIndexOf("&"))}],headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}),u=r().create({headers:{"content-type":"multipart/form-data"}});function d(e){var n=(0,s.lX)();e.interceptors.request.use((function(e){return e.headers.token="token",e}),(function(e){Promise.reject(e)})),e.interceptors.response.use((function(e){var n,t=e,a=t.data.code;return a?1e4===a?t.data:(n="".concat(t.data.msg),void f(new Error(n))):t}),(function(e){var t=!1;if(e&&e.response)switch(e.response.status){case 400:e.message="\u8bf7\u6c42\u9519\u8bef";break;case 401:e.message="\u672a\u767b\u5f55\u6216\u767b\u5f55\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",t=!0;break;case 403:e.message="\u62d2\u7edd\u8bbf\u95ee";break;case 404:e.message="\u8bf7\u6c42\u5730\u5740\u51fa\u9519: ".concat(e.response.config.url);break;case 408:e.message="\u8bf7\u6c42\u8d85\u65f6";break;case 500:e.message="\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef";break;case 501:e.message="\u670d\u52a1\u672a\u5b9e\u73b0";break;case 502:e.message="\u7f51\u5173\u9519\u8bef";break;case 503:e.message="\u670d\u52a1\u4e0d\u53ef\u7528";break;case 504:e.message="\u7f51\u5173\u8d85\u65f6";break;case 505:e.message="HTTP\u7248\u672c\u4e0d\u53d7\u652f\u6301"}return f(e),t&&setTimeout((function(){sessionStorage.removeItem(c.n),n.push("/"),n.go()}),1e3),Promise.reject(e)}))}function f(e){o.ZP.error(e.message)}d(l),d(i),d(u)},697:function(e,n,t){t.d(n,{EN:function(){return l},Lc:function(){return i},R5:function(){return s},U7:function(){return o},h9:function(){return d},iE:function(){return r},iQ:function(){return c},jE:function(){return u}});var a=t(7111),r=function(e){return(0,a.nL)({url:"/case-type/list",data:e,method:"post"})},o=function(e){return(0,a.nL)({url:"/case-type/save",data:e,method:"post"})},s=function(e){return(0,a.nL)({url:"/case-type/remove",data:e,method:"post"})},c=function(e){return(0,a.nL)({url:"/case-type-definition/list",data:e,method:"post"})},i=function(e){return(0,a.nL)({url:"/case-execution/create",data:e,method:"post"})},l=function(e){return(0,a.nL)({url:"/case-execution/list",data:e,method:"post"})},u=function(e){return(0,a.nL)({url:"/case-execution/complete",data:e,method:"post"})},d=function(e){return(0,a.nL)({url:"/case-execution/handle",data:e,method:"post"})}},3520:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var a=t(1413),r=t(9439),o=t(2791),s=t(3272),c=t(3099),i=t(7309),l=t(6038),u=t(3695),d=t(6106),f=t(914),m=t(498),p=t(8894),h=t(8678),g=t(7063),Z=t(5533),x=t(697),v=t(184),j=function(){var e=(0,o.useState)([]),n=(0,r.Z)(e,2),t=n[0],j=n[1],y=(0,o.useState)(!1),b=(0,r.Z)(y,2),w=b[0],C=b[1],S=(0,o.useState)(null),k=(0,r.Z)(S,2),T=k[0],E=k[1],P=(0,o.useState)(1),z=(0,r.Z)(P,2),L=z[0],I=z[1],R=(0,o.useState)(10),V=(0,r.Z)(R,2),N=V[0],O=V[1],F=(0,o.useState)(null),U=(0,r.Z)(F,2),M=U[0],H=U[1],_=s.Z.useForm(),q=(0,r.Z)(_,1)[0],A=(0,o.useState)(!1),D=(0,r.Z)(A,2),X=D[0],B=D[1],G=(0,o.useState)({code:null,message:null}),K=(0,r.Z)(G,2),Q=K[0],J=K[1],W=(0,o.useState)([]),Y=(0,r.Z)(W,2),$=Y[0],ee=Y[1];(0,o.useEffect)((function(){te()}),[]);var ne=[{title:"\u540d\u79f0",dataIndex:"name",onHeaderCell:function(e){e.align="center"},width:220},{title:"\u5907\u6ce8",dataIndex:"memo",onHeaderCell:function(e){e.align="center"}},{title:"\u6b65\u9aa4\u6570\u91cf",onHeaderCell:function(e){e.align="center"},width:120,render:function(e,n){return n.caseTypeSteps.length}},{title:"\u64cd\u4f5c",key:"action",render:function(e,n){return(0,v.jsxs)(c.Z,{size:"middle",children:[(0,v.jsx)(i.Z,{size:"small",onClick:function(){ae(n)},children:"\u4fee\u6539"}),(0,v.jsx)(l.Z,{placement:"left",title:"\u786e\u5b9a\u5220\u9664\u8be5\u7c7b\u578b\u5417\uff1f",onConfirm:function(){oe(n)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,v.jsx)(i.Z,{size:"small",children:"\u5220\u9664"})})]})},align:"center",width:100}],te=function(){C(!0);var e={entity:{},pageNum:L-1,pageSize:N,orderBy:"id asc"};(0,x.iE)(e).then((function(e){j(e.rows),E(e.total)})),C(!1)},ae=function(e){null!=e&&(q.setFieldsValue(e),H(e.id),ee(e.caseTypeSteps)),B(!0)},re=function(){B(!1),q.resetFields(),H(null),J({code:null,message:null}),ee([])},oe=function(e){var n={entity:{id:e.id}};(0,x.R5)(n).then((function(e){u.ZP.success(e.subMsg),te()}))};return(0,v.jsxs)("div",{className:"case-type-wrapper",children:[(0,v.jsx)("div",{className:"toolbar-area",children:(0,v.jsxs)(d.Z,{children:[(0,v.jsx)(f.Z,{span:20}),(0,v.jsx)(f.Z,{span:4,children:(0,v.jsx)("div",{style:{textAlign:"right",padding:"0 5px 0 0"},children:(0,v.jsx)(i.Z,{size:"small",onClick:function(){ae(null)},children:"\u65b0\u589e"})})})]})}),(0,v.jsx)(m.Z,{columns:ne,dataSource:t,loading:w,pagination:{position:["bottomRight"],total:T,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171".concat(e,"\u6761")},size:"small",current:L,pageSize:N,onChange:function(e,n,t,a){I(e),O(n),te()}},scroll:{scrollToFirstRowOnChange:!0,x:!0},bordered:"true",size:"small",rowKey:"id",rowSelection:{type:"checkbox"}}),(0,v.jsx)(p.Z,{title:"\u8be6\u7ec6\u4fe1\u606f",placement:"right",width:800,visible:X,onClose:re,children:null==Q.code?(0,v.jsxs)(s.Z,{form:q,layout:"vertical",onFinish:function(e){console.log("formdata",e);var n={entity:(0,a.Z)((0,a.Z)({id:M},e),{},{caseTypeSteps:$})};(0,x.U7)(n).then((function(e){0===e.subCode?(J({code:"success",message:e.subMsg}),te()):J({code:"error",message:e.subMsg})})),ee([])},children:[(0,v.jsx)(s.Z.Item,{name:"name",label:"\u540d\u79f0",rules:[{required:!0,message:"\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}],children:(0,v.jsx)(h.Z,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",maxLength:50})}),(0,v.jsx)(s.Z.Item,{label:"\u529e\u6848\u73af\u8282",children:(0,v.jsx)(Z.Z,{data:$,onChange:function(e){ee(e)}})}),(0,v.jsxs)(s.Z.Item,{wrapperCol:{offset:0,span:24},style:{textAlign:"center"},children:[(0,v.jsx)(i.Z,{type:"primary",htmlType:"submit",children:"\u4fdd\u5b58"})," \xa0",(0,v.jsx)(i.Z,{onClick:re,children:"\u53d6\u6d88"})]})]}):(0,v.jsx)(g.ZP,{status:Q.code,title:Q.message,extra:[(0,v.jsx)(i.Z,{onClick:re,children:"\u5173\u95ed"},"btn_"+Q.code)]})})]})}},5533:function(e,n,t){t.d(n,{Z:function(){return x}});var a=t(3433),r=t(1413),o=t(9439),s=t(2791),c=t(141),i=t(8678),l=t(1333),u=t(7309),d=t(9220),f=t(7528),m=t(2426),p=t.n(m),h=t(184),g=function(e){var n=(0,s.useState)(e.items),t=(0,o.Z)(n,2),r=t[0],c=t[1],l=(0,s.useState)(""),m=(0,o.Z)(l,2),g=m[0],Z=m[1],x=(0,s.useState)(""),v=(0,o.Z)(x,2),j=v[0],y=v[1],b=(0,s.useState)(null),w=(0,o.Z)(b,2),C=w[0],S=w[1],k=(0,s.createRef)(),T=(0,s.createRef)();(0,s.useEffect)((function(){k.current.focus()}),[]),(0,s.useEffect)((function(){console.log("data changed:",r),e.onChange(r)}),[r]);var E=function(){g&&g.length>0&&!r.find((function(e){return e.name===g}))&&(c(null!=C?r.map((function(e){return e.id===C?{id:e.id,name:g,lawTitle:j}:e})):[].concat((0,a.Z)(r),[{id:p()().format("X")+""+r.length,name:g,lawTitle:j}])),S(null),Z(""),y(""))};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(i.Z.Group,{compact:!0,children:[(0,h.jsx)(i.Z,{ref:k,placeholder:"\u4e8b\u9879\u540d\u79f0",allowClear:!0,size:"small",onChange:function(e){Z(e.target.value)},value:g,style:{width:"200px"},onPressEnter:function(e){e.preventDefault(),T.current.focus()}}),(0,h.jsx)(i.Z,{ref:T,placeholder:"\u6cd5\u5f8b\u6761\u6587",allowClear:!0,size:"small",onChange:function(e){y(e.target.value)},value:j,style:{width:"300px"},onPressEnter:function(e){e.preventDefault(),E(),k.current.focus()}}),(0,h.jsx)(u.Z,{size:"small",onClick:E,children:"\u4fdd\u5b58"})]}),(0,h.jsx)("div",{style:{padding:"10px"},children:r.map((function(e,n){return(0,h.jsx)(d.Z,{placement:"topLeft",title:e.lawTitle,color:"gold",arrowPointAtCenter:!0,children:(0,h.jsx)(f.Z,{onClose:function(){return function(e){var n=r.filter((function(n){return n.name!==e}));c(n)}("".concat(e.name))},onClick:function(){return function(e,n,t){S(e),Z(n),y(t),k.current.focus()}(e.id,e.name,e.lawTitle)},closable:!0,children:e.name})},e.id)}))})]})},Z=c.Z.TabPane,x=function(e){var n=(0,s.useState)([]),t=(0,o.Z)(n,2),u=t[0],d=t[1],f=(0,s.useState)(null),m=(0,o.Z)(f,2),p=m[0],x=m[1],v=(0,s.useState)("parent"),j=(0,o.Z)(v,2),y=j[0],b=j[1],w=(0,s.useRef)(1);(0,s.useEffect)((function(){}),[]),(0,s.useEffect)((function(){"parent"===y&&(console.log("props.data..."),w.current=1,e.data&&e.data.length>0?(d(e.data.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{orderValue:""+w.current++})}))),x("1")):d([])),"self"===y&&b("parent")}),[e.data]),(0,s.useEffect)((function(){b("self"),e.onChange(u)}),[u]);var C=function(){var e={orderValue:""+w.current++,name:"\u529e\u6848\u73af\u8282",caseTypeStepItems:[]};d([].concat((0,a.Z)(u),[e])),x(e.orderValue)},S=function(e){var n=p,t=-1;u.forEach((function(n,a){n.orderValue===e&&(t=a-1)}));var a=u.filter((function(n){return n.orderValue!==e}));a.length&&n===e&&(n=t>=0?a[t].orderValue:a[0].orderValue),d(a),x(n)},k=function(e){d(u.map((function(n){return n.orderValue===p?(0,r.Z)((0,r.Z)({},n),{},{caseTypeStepItems:e}):n})))},T=function(e){var n=e.target.value;u&&u.length>0&&d(u.map((function(e){return e.orderValue===p?(0,r.Z)((0,r.Z)({},e),{},{name:n}):e})))},E=function(e){e.target.select()};return(0,h.jsx)("div",{className:"case-definition-step-wrapper",children:(0,h.jsx)(c.Z,{activeKey:p,type:"editable-card",tabPosition:"left",size:"small",onChange:function(e){x(e)},onEdit:function(e,n){"add"===n&&C(),"remove"===n&&S(e)},children:u.map((function(e){return(0,h.jsx)(Z,{tab:e.name,children:(0,h.jsxs)("div",{className:"case-definition-step-panel",children:[(0,h.jsx)(i.Z,{addonBefore:"\u73af\u8282\u540d\u79f0",defaultValue:e.name,size:"medium",onChange:T,onFocus:E,onPressEnter:function(e){e.preventDefault()}}),(0,h.jsx)(l.Z,{}),(0,h.jsx)(g,{items:e.caseTypeStepItems,onChange:k})]})},e.orderValue)}))})})}},9201:function(e,n,t){t.d(n,{G:function(){return r},n:function(){return a}});var a="loginUserToken",r="consoleNavigateTabs"},1333:function(e,n,t){var a=t(7462),r=t(4942),o=t(2791),s=t(1694),c=t.n(s),i=t(9077),l=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t};n.Z=function(e){var n,t=o.useContext(i.E_),s=t.getPrefixCls,u=t.direction,d=e.prefixCls,f=e.type,m=void 0===f?"horizontal":f,p=e.orientation,h=void 0===p?"center":p,g=e.orientationMargin,Z=e.className,x=e.children,v=e.dashed,j=e.plain,y=l(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),b=s("divider",d),w=h.length>0?"-".concat(h):h,C=!!x,S="left"===h&&null!=g,k="right"===h&&null!=g,T=c()(b,"".concat(b,"-").concat(m),(n={},(0,r.Z)(n,"".concat(b,"-with-text"),C),(0,r.Z)(n,"".concat(b,"-with-text").concat(w),C),(0,r.Z)(n,"".concat(b,"-dashed"),!!v),(0,r.Z)(n,"".concat(b,"-plain"),!!j),(0,r.Z)(n,"".concat(b,"-rtl"),"rtl"===u),(0,r.Z)(n,"".concat(b,"-no-default-orientation-margin-left"),S),(0,r.Z)(n,"".concat(b,"-no-default-orientation-margin-right"),k),n),Z),E=(0,a.Z)((0,a.Z)({},S&&{marginLeft:g}),k&&{marginRight:g});return o.createElement("div",(0,a.Z)({className:T},y,{role:"separator"}),x&&o.createElement("span",{className:"".concat(b,"-inner-text"),style:E},x))}}}]);
//# sourceMappingURL=520.b6601ae3.chunk.js.map