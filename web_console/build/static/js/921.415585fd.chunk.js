"use strict";(self.webpackChunkweb_console=self.webpackChunkweb_console||[]).push([[921],{7111:function(e,t,n){n.d(t,{Xn:function(){return c},nL:function(){return i}});var r=n(4569),a=n.n(r),s=n(3695),o=n(390),u=n(9201);a().defaults.timeout=6e4,a().defaults.baseURL="/legal-case";var i=a().create({}),c=a().create({contentType:"application/x-www-form-urlencoded;charset=UTF-8",transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t=t.substring(0,t.lastIndexOf("&"))}],headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}),l=a().create({headers:{"content-type":"multipart/form-data"}});function d(e){var t=(0,o.lX)();e.interceptors.request.use((function(e){return e.headers.token="token",e}),(function(e){Promise.reject(e)})),e.interceptors.response.use((function(e){var t,n=e,r=n.data.code;return r?1e4===r?n.data:(t="".concat(n.data.msg),void f(new Error(t))):n}),(function(e){var n=!1;if(e&&e.response)switch(e.response.status){case 400:e.message="\u8bf7\u6c42\u9519\u8bef";break;case 401:e.message="\u672a\u767b\u5f55\u6216\u767b\u5f55\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",n=!0;break;case 403:e.message="\u62d2\u7edd\u8bbf\u95ee";break;case 404:e.message="\u8bf7\u6c42\u5730\u5740\u51fa\u9519: ".concat(e.response.config.url);break;case 408:e.message="\u8bf7\u6c42\u8d85\u65f6";break;case 500:e.message="\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef";break;case 501:e.message="\u670d\u52a1\u672a\u5b9e\u73b0";break;case 502:e.message="\u7f51\u5173\u9519\u8bef";break;case 503:e.message="\u670d\u52a1\u4e0d\u53ef\u7528";break;case 504:e.message="\u7f51\u5173\u8d85\u65f6";break;case 505:e.message="HTTP\u7248\u672c\u4e0d\u53d7\u652f\u6301"}return f(e),n&&setTimeout((function(){sessionStorage.removeItem(u.n),t.push("/"),t.go()}),1e3),Promise.reject(e)}))}function f(e){s.ZP.error(e.message)}d(c),d(i),d(l)},697:function(e,t,n){n.d(t,{BS:function(){return m},EN:function(){return c},Lc:function(){return i},Lg:function(){return g},R5:function(){return o},U7:function(){return s},_l:function(){return p},h9:function(){return d},iE:function(){return a},iQ:function(){return u},id:function(){return h},jE:function(){return l},pV:function(){return f},sA:function(){return x}});var r=n(7111),a=function(e){return(0,r.nL)({url:"/case-type/list",data:e,method:"post"})},s=function(e){return(0,r.nL)({url:"/case-type/save",data:e,method:"post"})},o=function(e){return(0,r.nL)({url:"/case-type/remove",data:e,method:"post"})},u=function(e){return(0,r.nL)({url:"/case-type-definition/list",data:e,method:"post"})},i=function(e){return(0,r.nL)({url:"/case-execution/create",data:e,method:"post"})},c=function(e){return(0,r.nL)({url:"/case-execution/list",data:e,method:"post"})},l=function(e){return(0,r.nL)({url:"/case-execution/complete",data:e,method:"post"})},d=function(e){return(0,r.nL)({url:"/case-execution/handle",data:e,method:"post"})},f=function(){return(0,r.nL)({url:"/subject/tree",method:"get"})},m=function(e){return(0,r.nL)({url:"/subject/save",data:e,method:"post"})},p=function(e){return(0,r.nL)({url:"/subject/remove",data:e,method:"post"})},h=function(e){return(0,r.nL)({url:"/subject/item-list",data:e,method:"post"})},g=function(e){return(0,r.nL)({url:"/subject/save-item",data:e,method:"post"})},x=function(e){return(0,r.nL)({url:"/subject/remove-item",data:e,method:"post"})}},7735:function(e,t,n){n.d(t,{JR:function(){return c},Lh:function(){return u},Uy:function(){return l},a$:function(){return d},c0:function(){return f},gQ:function(){return o},kS:function(){return s},ul:function(){return i},x4:function(){return a}});var r=n(7111),a=function(e){var t={loginToken:e};return(0,r.Xn)({url:"/login",data:t,method:"post"})},s=function(){return(0,r.Xn)({url:"/logout",method:"get"})},o=function(e){var t={params:e};return(0,r.Xn)({url:"/user/update-password",data:t,method:"post"})},u=function(e){return(0,r.nL)({url:"/user/list",data:e,method:"post"})},i=function(e){return(0,r.nL)({url:"/user/action",data:e,method:"post"})},c=function(e){return(0,r.nL)({url:"/user/update",data:e,method:"post"})},l=function(){return(0,r.nL)({url:"/role/list",method:"get"})},d=function(e){return(0,r.nL)({url:"/user/register",data:e,method:"post"})},f=function(e){return(0,r.nL)({url:"/user/reset-password",data:e,method:"post"})}},5921:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r=n(9439),a=n(2791),s=n(6435),o=n(3272),u=n(3099),i=n(7309),c=n(8678),l=n(2014),d=n(7751),f=n(1294),m=n(141),p=n(63),h=n(9163),g=n(6106),x=n(914),j=n(9220),y=n(7528),b=n(184),Z=(m.Z.TabPane,p.Z.Panel),v=function(e){var t=(0,a.useState)({}),n=(0,r.Z)(t,2),s=n[0],u=n[1],i=(0,a.useState)([]),c=(0,r.Z)(i,2),l=c[0],d=c[1],m=(0,a.useState)([]),v=(0,r.Z)(m,2),w=v[0],I=v[1],L=(0,a.useState)([]),S=(0,r.Z)(L,2),T=S[0],k=S[1];(0,a.useEffect)((function(){console.log(e),u(e.data),d(e.caseTypeData),I(e.data.steps?e.data.steps.map((function(e){return e.id})):[]),k(e.userData)}),[]);return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(h.Z,{title:"\u6848\u4ef6\u8be6\u60c5",className:"site-page-header",subTitle:"\u67e5\u770b\u6848\u4ef6\u8be6\u60c5",avatar:{src:f},onBack:function(){return e.onExit()},children:(0,b.jsx)(o.Z,{layout:"vertical",children:(0,b.jsxs)(g.Z,{gutter:16,className:"case-form-row",justify:"space-between",children:[(0,b.jsxs)(x.Z,{span:9,className:"case-form-area",children:[(0,b.jsx)(o.Z.Item,{label:"\u7c7b\u578b",children:l&&l.length>0?l.find((function(e){return e.id===s.typeId})).name:""}),(0,b.jsx)(o.Z.Item,{label:"\u540d\u79f0",children:s.name}),(0,b.jsx)(o.Z.Item,{label:"\u8d1f\u8d23\u4eba",children:T.length>0?T.find((function(e){return e.id===s.createdBy})).name:""}),(0,b.jsx)(o.Z.Item,{label:"\u521b\u5efa\u65f6\u95f4",children:s.createdTime}),(0,b.jsx)(o.Z.Item,{label:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",children:s.lastmodifiedTime})]}),(0,b.jsxs)(x.Z,{span:15,className:"case-form-area",children:[(0,b.jsx)("span",{style:{fontWeight:600},children:"\u6b65\u9aa4\u53ca\u4e8b\u9879"}),(0,b.jsx)(p.Z,{activeKey:w,onChange:function(e){I(e)},className:"case-form-step-data",style:{marginTop:"10px"},expandIconPosition:"left",children:s.steps?s.steps.map((function(e){return(0,b.jsx)(Z,{header:e.name,collapsible:"header",extra:(0,b.jsx)("span",{children:e.suspect}),children:e.caseTypeStepItems&&e.caseTypeStepItems.length>0?e.caseTypeStepItems.map((function(e){return 1===e.status?(0,b.jsx)(j.Z,{placement:"topLeft",title:e.lawTitle,color:"gold",arrowPointAtCenter:!0,children:(0,b.jsx)(y.Z,{className:"edit-tag",closable:!1,children:e.name},e.id)},e.name):""})):""},e.id)})):[]})]})]})})})})},w=n(697),I=n(7735),L=s.Z.Option,S=[{label:"\u8fdb\u884c\u4e2d",value:"1"},{label:"\u5df2\u5b8c\u6210",value:"2"}],T=function(){var e=o.Z.useForm(),t=(0,r.Z)(e,1)[0],n=(0,a.useState)(!1),f=(0,r.Z)(n,2),m=f[0],p=f[1],h=(0,a.useState)([]),g=(0,r.Z)(h,2),x=g[0],j=g[1],y=(0,a.useState)(null),Z=(0,r.Z)(y,2),T=Z[0],k=Z[1],C=(0,a.useState)(1),z=(0,r.Z)(C,2),N=z[0],E=z[1],R=(0,a.useState)(10),B=(0,r.Z)(R,2),F=B[0],H=B[1],P=(0,a.useState)([]),U=(0,r.Z)(P,2),D=U[0],X=U[1],O=(0,a.useState)(null),G=(0,r.Z)(O,2),K=G[0],Q=G[1],V=(0,a.useState)([]),_=(0,r.Z)(V,2),q=_[0],A=_[1];(0,a.useEffect)((function(){J(),M(),W()}),[]);var J=function(){(0,w.iE)({entity:{},pageNum:0,pageSize:1e3,orderBy:"id asc"}).then((function(e){X(e.rows)}))},W=function(){(0,I.Lh)({entity:{},where:[{field:"status",opt:"in",value:"1,2"}],pageNum:0,pageSize:1e3,orderBy:"id asc"}).then((function(e){A(e.rows)}))},$=function(){Q(null)},M=function(){p(!0);var e=t.getFieldsValue();console.log("searchData",e);var n={entity:{typeId:e.typeId,name:e.name},where:e.status&&e.status.length>0?[{field:"status",opt:"in",value:e.status.join()}]:[{field:"status",opt:"in",value:"1,2"}],pageNum:N-1,pageSize:F,orderBy:"createdTime desc"};if(e.creator&&e.creator.trim().length>0){console.log("creator is inputed");var r=q.filter((function(t){return t.name.indexOf(e.creator)>-1})).map((function(e){return e.id+""})).join();0===r.trim().length&&(r="0"),n.where.push({field:"createdBy",opt:"in",value:r})}(0,w.EN)(n).then((function(e){console.log(e),j(e.rows),k(e.total)})),p(!1)},Y=[{title:"\u540d\u79f0",dataIndex:"name",onHeaderCell:function(e){e.align="center"}},{title:"\u7c7b\u578b",onHeaderCell:function(e){e.align="center"},render:function(e,t){var n=D.find((function(e){return e.id===t.typeId}));return n?n.name:".name"},width:120},{title:"\u8d1f\u8d23\u4eba",dataIndex:"createdBy",onHeaderCell:function(e){e.align="center"},render:function(e,t){return q.length>0?q.find((function(e){return e.id===t.createdBy})).name:""},width:80},{title:"\u73af\u8282\u6570\u91cf",onHeaderCell:function(e){e.align="center"},render:function(e,t){return t.steps.length},width:80},{title:"\u5269\u4f59\u4e8b\u9879",onHeaderCell:function(e){e.align="center"},render:function(e,t){var n=0;return t.steps.forEach((function(e){e.caseTypeStepItems&&(n+=e.caseTypeStepItems.filter((function(e){return 1===e.status})).length)})),n},width:80},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdTime",onHeaderCell:function(e){e.align="center"},width:180},{title:"\u72b6\u6001",dataIndex:"status",onHeaderCell:function(e){e.align="center"},render:function(e,t){return 1===t.status?(0,b.jsx)("span",{style:{color:"green"},children:"\u8fdb\u884c\u4e2d"}):2===t.status?(0,b.jsx)("span",{style:{color:"Gray"},children:"\u5df2\u5b8c\u6210"}):void 0},width:60},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return(0,b.jsx)(u.Z,{size:"middle",children:(0,b.jsx)(i.Z,{size:"small",onClick:function(){return function(e){Q(e)}(t)},children:"\u67e5\u770b"})})},align:"center",width:100}];return null==K?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(o.Z,{form:t,initialValues:{status:["1","2"]},layout:"inline",className:"search-form",onFinish:function(e){M()},children:[(0,b.jsx)(o.Z.Item,{name:"typeId",label:"\u7c7b\u578b",children:(0,b.jsxs)(s.Z,{style:{width:"160px"},size:"small",children:[(0,b.jsx)(L,{value:"",children:"\u8bf7\u9009\u62e9"}),D.map((function(e){return(0,b.jsx)(L,{value:e.id,children:e.name},e.id)}))]})}),(0,b.jsx)(o.Z.Item,{name:"name",label:"\u540d\u79f0",children:(0,b.jsx)(c.Z,{maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",size:"small"})}),(0,b.jsx)(o.Z.Item,{name:"creator",label:"\u8d1f\u8d23\u4eba",children:(0,b.jsx)(c.Z,{maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u8d1f\u8d23\u4eba",size:"small"})}),(0,b.jsx)(o.Z.Item,{name:"status",label:"\u72b6\u6001",children:(0,b.jsx)(l.Z.Group,{options:S})}),(0,b.jsx)(o.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,b.jsx)(i.Z,{type:"primary",size:"small",htmlType:"submit",children:"\u67e5\u8be2"})})]}),(0,b.jsx)(d.Z,{columns:Y,dataSource:x,loading:m,pagination:{position:["bottomRight"],total:T,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171".concat(e,"\u6761")},size:"small",current:N,pageSize:F,onChange:function(e,t){E(e),H(t),M()}},scroll:{scrollToFirstRowOnChange:!0,x:!0},bordered:"true",size:"small",rowKey:"id",rowSelection:{type:"checkbox",onChange:function(e,t,n){console.log("selectedRowKeys",e),console.log("selectedRows",t),console.log("info",n)}}})]}):(0,b.jsx)(v,{data:K,caseTypeData:D,userData:q,onExit:$,onSaveSuccess:function(){$(),M()}})}},9201:function(e,t,n){n.d(t,{G:function(){return a},n:function(){return r}});var r="loginUserToken",a="consoleNavigateTabs"},1294:function(e,t,n){e.exports=n.p+"static/media/new-case.5deb2e5ace8ffe565deb.jpg"}}]);
//# sourceMappingURL=921.415585fd.chunk.js.map