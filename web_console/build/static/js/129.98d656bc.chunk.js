"use strict";(self.webpackChunkweb_console=self.webpackChunkweb_console||[]).push([[129],{7111:function(e,n,t){t.d(n,{Xn:function(){return l},nL:function(){return c}});var r=t(4569),a=t.n(r),o=t(3695),i=t(390),s=t(9201);a().defaults.timeout=6e4,a().defaults.baseURL="/legal-case";var c=a().create({}),l=a().create({contentType:"application/x-www-form-urlencoded;charset=UTF-8",transformRequest:[function(e){var n="";for(var t in e)n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&";return n=n.substring(0,n.lastIndexOf("&"))}],headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}),u=a().create({headers:{"content-type":"multipart/form-data"}});function d(e){var n=(0,i.lX)();e.interceptors.request.use((function(e){return e.headers.token="token",e}),(function(e){Promise.reject(e)})),e.interceptors.response.use((function(e){var n,t=e,r=t.data.code;return r?1e4===r?t.data:(n="".concat(t.data.msg),void f(new Error(n))):t}),(function(e){var t=!1;if(e&&e.response)switch(e.response.status){case 400:e.message="\u8bf7\u6c42\u9519\u8bef";break;case 401:e.message="\u672a\u767b\u5f55\u6216\u767b\u5f55\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",t=!0;break;case 403:e.message="\u62d2\u7edd\u8bbf\u95ee";break;case 404:e.message="\u8bf7\u6c42\u5730\u5740\u51fa\u9519: ".concat(e.response.config.url);break;case 408:e.message="\u8bf7\u6c42\u8d85\u65f6";break;case 500:e.message="\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef";break;case 501:e.message="\u670d\u52a1\u672a\u5b9e\u73b0";break;case 502:e.message="\u7f51\u5173\u9519\u8bef";break;case 503:e.message="\u670d\u52a1\u4e0d\u53ef\u7528";break;case 504:e.message="\u7f51\u5173\u8d85\u65f6";break;case 505:e.message="HTTP\u7248\u672c\u4e0d\u53d7\u652f\u6301"}return f(e),t&&setTimeout((function(){sessionStorage.removeItem(s.n),n.push("/"),n.go()}),1e3),Promise.reject(e)}))}function f(e){o.ZP.error(e.message)}d(l),d(c),d(u)},697:function(e,n,t){t.d(n,{BS:function(){return m},EN:function(){return l},Lc:function(){return c},Lg:function(){return g},R5:function(){return i},U7:function(){return o},_l:function(){return p},h9:function(){return d},iE:function(){return a},iQ:function(){return s},id:function(){return h},jE:function(){return u},pV:function(){return f},sA:function(){return x}});var r=t(7111),a=function(e){return(0,r.nL)({url:"/case-type/list",data:e,method:"post"})},o=function(e){return(0,r.nL)({url:"/case-type/save",data:e,method:"post"})},i=function(e){return(0,r.nL)({url:"/case-type/remove",data:e,method:"post"})},s=function(e){return(0,r.nL)({url:"/case-type-definition/list",data:e,method:"post"})},c=function(e){return(0,r.nL)({url:"/case-execution/create",data:e,method:"post"})},l=function(e){return(0,r.nL)({url:"/case-execution/list",data:e,method:"post"})},u=function(e){return(0,r.nL)({url:"/case-execution/complete",data:e,method:"post"})},d=function(e){return(0,r.nL)({url:"/case-execution/handle",data:e,method:"post"})},f=function(){return(0,r.nL)({url:"/subject/tree",method:"get"})},m=function(e){return(0,r.nL)({url:"/subject/save",data:e,method:"post"})},p=function(e){return(0,r.nL)({url:"/subject/remove",data:e,method:"post"})},h=function(e){return(0,r.nL)({url:"/subject/item-list",data:e,method:"post"})},g=function(e){return(0,r.nL)({url:"/subject/save-item",data:e,method:"post"})},x=function(e){return(0,r.nL)({url:"/subject/remove-item",data:e,method:"post"})}},3129:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r=t(1413),a=t(9439),o=t(2791),i=t(6435),s=t(8678),c=t(3272),l=t(3099),u=t(7309),d=t(6038),f=t(6106),m=t(914),p=t(7751),h=t(8894),g=t(7063),x=t(697),Z=t(5533),j=t(2426),y=t.n(j),v=t(184),w=i.Z.Option,b=s.Z.TextArea,C=function(){var e=(0,o.useState)([]),n=(0,a.Z)(e,2),t=n[0],j=n[1],C=c.Z.useForm(),I=(0,a.Z)(C,1)[0],S=(0,o.useState)(null),k=(0,a.Z)(S,2),T=k[0],L=k[1],E=(0,o.useState)([]),z=(0,a.Z)(E,2),V=z[0],P=z[1],F=(0,o.useState)(!1),R=(0,a.Z)(F,2),N=R[0],O=R[1],H=(0,o.useState)(null),U=(0,a.Z)(H,2),A=U[0],D=U[1],_=(0,o.useState)(1),q=(0,a.Z)(_,2),B=q[0],M=q[1],Y=(0,o.useState)(10),K=(0,a.Z)(Y,2),Q=K[0],X=K[1],G=c.Z.useForm(),J=(0,a.Z)(G,1)[0],W=(0,o.useState)(!1),$=(0,a.Z)(W,2),ee=$[0],ne=$[1],te=(0,o.useState)({code:null,message:null}),re=(0,a.Z)(te,2),ae=re[0],oe=re[1],ie=(0,o.useState)([]),se=(0,a.Z)(ie,2),ce=se[0],le=se[1],ue=[{title:"\u7c7b\u578b",dataIndex:"typeId",onHeaderCell:function(e){e.align="center"},render:function(e,n){return(t.filter((function(e){return e.typeId===n.typeId}))||[{name:""}])[0].name},width:120},{title:"\u540d\u79f0",dataIndex:"name",onHeaderCell:function(e){e.align="center"},width:160},{title:"\u6b65\u9aa4\u6570\u91cf",dataIndex:"stepCount",onHeaderCell:function(e){e.align="center"},width:80},{title:"\u4e8b\u9879\u6570\u91cf",dataIndex:"itemCount",onHeaderCell:function(e){e.align="center"},width:80},{title:"\u5907\u6ce8",dataIndex:"memo",onHeaderCell:function(e){e.align="center"}},{title:"\u72b6\u6001",dataIndex:"status",onHeaderCell:function(e){e.align="center"},render:function(e,n){return 1===n.status?(0,v.jsx)("span",{style:{color:"green"},children:"\u6b63\u5e38"}):0===n.status?(0,v.jsx)("span",{style:{color:"Chartreuse"},children:"\u7981\u7528"}):void 0},width:50},{title:"\u64cd\u4f5c",key:"action",render:function(e,n){return(0,v.jsxs)(l.Z,{size:"middle",children:[(0,v.jsx)(u.Z,{size:"small",onClick:function(){return me(n)},children:"\u4fee\u6539"}),(0,v.jsx)(d.Z,{placement:"left",title:"\u9501\u5b9a\u540e\u7528\u6237\u4e0d\u53ef\u4ee5\u6b63\u5e38\u767b\u5f55\u7cfb\u7edf\uff0c\u786e\u5b9a\u9501\u5b9a\u8be5\u7528\u6237\u5417\uff1f",onConfirm:function(){return pe(n)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,v.jsx)(u.Z,{size:"small",children:"\u5220\u9664"})})]})},align:"center",width:100}];(0,o.useEffect)((function(){de()}),[]);var de=function(){(0,x.iE)({entity:{},pageNum:0,pageSize:1e3,orderBy:"id asc"}).then((function(e){j(e.rows)}))},fe=function(){O(!0);var e=I.getFieldsValue(),n={entity:{typeId:0===e.typeId.length?null:e.typeId},pageNum:B-1,pageSize:Q,orderBy:"createdTime desc"};(0,x.iQ)(n).then((function(e){P(e.rows),D(e.total)})),O(!1)},me=function(e){},pe=function(e){},he=function(){ne(!1),J.resetFields(),L(null),oe({code:null,message:null})};return(0,v.jsxs)("div",{className:"case-type-definition-wrapper",children:[(0,v.jsxs)(f.Z,{className:"search-form",children:[(0,v.jsx)(m.Z,{span:20,children:(0,v.jsxs)(c.Z,{form:I,initialValues:{typeId:""},layout:"inline",onFinish:function(){fe()},children:[(0,v.jsx)(c.Z.Item,{name:"typeId",label:"\u7c7b\u578b",children:(0,v.jsxs)(i.Z,{style:{width:120},size:"medium",children:[(0,v.jsx)(w,{children:"\u8bf7\u9009\u62e9"},""),t.map((function(e){return(0,v.jsx)(w,{children:e.name},e.id)}))]})}),(0,v.jsx)(c.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,v.jsx)(u.Z,{type:"primary",size:"small",htmlType:"submit",children:"\u67e5\u8be2"})})]})}),(0,v.jsx)(m.Z,{span:4,style:{textAlign:"right",padding:"3px 5px 0 0",lineHeight:"100%"},children:(0,v.jsx)(u.Z,{size:"small",onClick:function(){var e;e&&(J.setFieldsValue(e),L(e.id)),ne(!0)},children:"\u65b0\u589e"})})]}),(0,v.jsx)(p.Z,{columns:ue,dataSource:V,loading:N,pagination:{position:["bottomRight"],total:A,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171".concat(e,"\u6761")},size:"small",current:B,pageSize:Q,onChange:function(e,n,t,r){M(e),X(n),fe()}},scroll:{scrollToFirstRowOnChange:!0,x:!0},bordered:"true",size:"small",rowKey:"id",rowSelection:{type:"checkbox",onChange:function(e,n,t){console.log("selectedRowKeys",e),console.log("selectedRows",n),console.log("info",t)}}}),(0,v.jsx)(h.Z,{title:"\u8be6\u7ec6\u4fe1\u606f",placement:"right",width:800,visible:ee,onClose:he,children:null==ae.code?(0,v.jsxs)(c.Z,(0,r.Z)((0,r.Z)({form:J},{labelCol:{xs:{span:20},sm:{span:3}},wrapperCol:{xs:{span:20},sm:{span:22}}}),{},{labelAlign:"right",onFinish:function(e){(0,r.Z)({id:T},e)},children:[(0,v.jsx)(c.Z.Item,{name:"typeId",label:"\u7c7b\u578b",rules:[{required:!0,message:"\u7c7b\u578b\u5fc5\u987b\u9009\u62e9"}],children:(0,v.jsxs)(i.Z,{style:{width:120},size:"medium",onChange:function(e,n){return function(e){e.key&&e.key.length>0&&J.setFieldsValue({name:e.children+y()().format("YYYYMMDD")})}(n)},children:[(0,v.jsx)(w,{children:"\u8bf7\u9009\u62e9"},""),t.map((function(e){return(0,v.jsx)(w,{children:e.name},e.id)}))]})}),(0,v.jsx)(c.Z.Item,{name:"name",label:"\u540d\u79f0",rules:[{required:!0,message:"\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}],children:(0,v.jsx)(s.Z,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",maxLength:50})}),(0,v.jsx)(c.Z.Item,{name:"memo",label:"\u5907\u6ce8",children:(0,v.jsx)(b,{rows:4})}),(0,v.jsx)(c.Z.Item,{label:"\u529e\u6848\u73af\u8282",children:(0,v.jsx)(Z.Z,{data:ce,onChange:function(e){le(e)}})}),(0,v.jsxs)(c.Z.Item,{wrapperCol:{offset:0,span:24},style:{textAlign:"center"},children:[(0,v.jsx)(u.Z,{type:"primary",htmlType:"submit",children:"\u4fdd\u5b58"})," \xa0",(0,v.jsx)(u.Z,{onClick:he,children:"\u53d6\u6d88"})]})]})):(0,v.jsx)(g.ZP,{status:ae.code,title:ae.message,extra:[(0,v.jsx)(u.Z,{onClick:he,children:"\u5173\u95ed"},"btn_"+ae.code)]})})]})}},5533:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(3433),a=t(1413),o=t(9439),i=t(2791),s=t(141),c=t(8678),l=t(1333),u=t(7309),d=t(9220),f=t(7528),m=t(2426),p=t.n(m),h=t(184),g=function(e){var n=(0,i.useState)(e.items),t=(0,o.Z)(n,2),a=t[0],s=t[1],l=(0,i.useState)(""),m=(0,o.Z)(l,2),g=m[0],x=m[1],Z=(0,i.useState)(""),j=(0,o.Z)(Z,2),y=j[0],v=j[1],w=(0,i.useState)(null),b=(0,o.Z)(w,2),C=b[0],I=b[1],S=(0,i.createRef)(),k=(0,i.createRef)();(0,i.useEffect)((function(){S.current.focus()}),[]),(0,i.useEffect)((function(){console.log("data changed:",a),e.onChange(a)}),[a]);var T=function(){g&&g.length>0&&!a.find((function(e){return e.name===g}))&&(s(null!=C?a.map((function(e){return e.id===C?{id:e.id,name:g,lawTitle:y}:e})):[].concat((0,r.Z)(a),[{id:p()().format("X")+""+a.length,name:g,lawTitle:y}])),I(null),x(""),v(""))};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(c.Z.Group,{compact:!0,children:[(0,h.jsx)(c.Z,{ref:S,placeholder:"\u4e8b\u9879\u540d\u79f0",allowClear:!0,size:"small",onChange:function(e){x(e.target.value)},value:g,style:{width:"200px"},onPressEnter:function(e){e.preventDefault(),k.current.focus()}}),(0,h.jsx)(c.Z,{ref:k,placeholder:"\u6cd5\u5f8b\u6761\u6587",allowClear:!0,size:"small",onChange:function(e){v(e.target.value)},value:y,style:{width:"300px"},onPressEnter:function(e){e.preventDefault(),T(),S.current.focus()}}),(0,h.jsx)(u.Z,{size:"small",onClick:T,children:"\u4fdd\u5b58"})]}),(0,h.jsx)("div",{style:{padding:"10px"},children:a.map((function(e,n){return(0,h.jsx)(d.Z,{placement:"topLeft",title:e.lawTitle,color:"gold",arrowPointAtCenter:!0,children:(0,h.jsx)(f.Z,{onClose:function(){return function(e){var n=a.filter((function(n){return n.name!==e}));s(n)}("".concat(e.name))},onClick:function(){return function(e,n,t){I(e),x(n),v(t),S.current.focus()}(e.id,e.name,e.lawTitle)},closable:!0,children:e.name})},e.id)}))})]})},x=s.Z.TabPane,Z=function(e){var n=(0,i.useState)([]),t=(0,o.Z)(n,2),u=t[0],d=t[1],f=(0,i.useState)(null),m=(0,o.Z)(f,2),p=m[0],Z=m[1],j=(0,i.useState)("parent"),y=(0,o.Z)(j,2),v=y[0],w=y[1],b=(0,i.useRef)(1);(0,i.useEffect)((function(){}),[]),(0,i.useEffect)((function(){"parent"===v&&(console.log("props.data..."),b.current=1,e.data&&e.data.length>0?(d(e.data.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{orderValue:""+b.current++})}))),Z("1")):d([])),"self"===v&&w("parent")}),[e.data]),(0,i.useEffect)((function(){w("self"),e.onChange(u)}),[u]);var C=function(){var e={orderValue:""+b.current++,name:"\u529e\u6848\u73af\u8282",caseTypeStepItems:[]};d([].concat((0,r.Z)(u),[e])),Z(e.orderValue)},I=function(e){var n=p,t=-1;u.forEach((function(n,r){n.orderValue===e&&(t=r-1)}));var r=u.filter((function(n){return n.orderValue!==e}));r.length&&n===e&&(n=t>=0?r[t].orderValue:r[0].orderValue),d(r),Z(n)},S=function(e){d(u.map((function(n){return n.orderValue===p?(0,a.Z)((0,a.Z)({},n),{},{caseTypeStepItems:e}):n})))},k=function(e){var n=e.target.value;u&&u.length>0&&d(u.map((function(e){return e.orderValue===p?(0,a.Z)((0,a.Z)({},e),{},{name:n}):e})))},T=function(e){e.target.select()};return(0,h.jsx)("div",{className:"case-definition-step-wrapper",children:(0,h.jsx)(s.Z,{activeKey:p,type:"editable-card",tabPosition:"left",size:"small",onChange:function(e){Z(e)},onEdit:function(e,n){"add"===n&&C(),"remove"===n&&I(e)},children:u.map((function(e){return(0,h.jsx)(x,{tab:e.name,children:(0,h.jsxs)("div",{className:"case-definition-step-panel",children:[(0,h.jsx)(c.Z,{addonBefore:"\u73af\u8282\u540d\u79f0",defaultValue:e.name,size:"medium",onChange:k,onFocus:T,onPressEnter:function(e){e.preventDefault()}}),(0,h.jsx)(l.Z,{}),(0,h.jsx)(g,{items:e.caseTypeStepItems,onChange:S})]})},e.orderValue)}))})})}},9201:function(e,n,t){t.d(n,{G:function(){return a},n:function(){return r}});var r="loginUserToken",a="consoleNavigateTabs"},1333:function(e,n,t){var r=t(7462),a=t(4942),o=t(2791),i=t(1694),s=t.n(i),c=t(9077),l=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t};n.Z=function(e){var n,t=o.useContext(c.E_),i=t.getPrefixCls,u=t.direction,d=e.prefixCls,f=e.type,m=void 0===f?"horizontal":f,p=e.orientation,h=void 0===p?"center":p,g=e.orientationMargin,x=e.className,Z=e.children,j=e.dashed,y=e.plain,v=l(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),w=i("divider",d),b=h.length>0?"-".concat(h):h,C=!!Z,I="left"===h&&null!=g,S="right"===h&&null!=g,k=s()(w,"".concat(w,"-").concat(m),(n={},(0,a.Z)(n,"".concat(w,"-with-text"),C),(0,a.Z)(n,"".concat(w,"-with-text").concat(b),C),(0,a.Z)(n,"".concat(w,"-dashed"),!!j),(0,a.Z)(n,"".concat(w,"-plain"),!!y),(0,a.Z)(n,"".concat(w,"-rtl"),"rtl"===u),(0,a.Z)(n,"".concat(w,"-no-default-orientation-margin-left"),I),(0,a.Z)(n,"".concat(w,"-no-default-orientation-margin-right"),S),n),x),T=(0,r.Z)((0,r.Z)({},I&&{marginLeft:g}),S&&{marginRight:g});return o.createElement("div",(0,r.Z)({className:k},v,{role:"separator"}),Z&&o.createElement("span",{className:"".concat(w,"-inner-text"),style:T},Z))}}}]);
//# sourceMappingURL=129.98d656bc.chunk.js.map