"use strict";(self.webpackChunkweb_console=self.webpackChunkweb_console||[]).push([[989],{7111:function(e,t,n){n.d(t,{Xn:function(){return l},nL:function(){return c}});var a=n(4569),r=n.n(a),s=n(3695),o=n(390),i=n(9201);r().defaults.timeout=6e4,r().defaults.baseURL="/legal-case";var c=r().create({}),l=r().create({contentType:"application/x-www-form-urlencoded;charset=UTF-8",transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t=t.substring(0,t.lastIndexOf("&"))}],headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}),u=r().create({headers:{"content-type":"multipart/form-data"}});function d(e){var t=(0,o.lX)();e.interceptors.request.use((function(e){return e.headers.token="token",e}),(function(e){Promise.reject(e)})),e.interceptors.response.use((function(e){var t,n=e,a=n.data.code;return a?1e4===a?n.data:(t="".concat(n.data.msg),void f(new Error(t))):n}),(function(e){var n=!1;if(e&&e.response)switch(e.response.status){case 400:e.message="\u8bf7\u6c42\u9519\u8bef";break;case 401:e.message="\u672a\u767b\u5f55\u6216\u767b\u5f55\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",n=!0;break;case 403:e.message="\u62d2\u7edd\u8bbf\u95ee";break;case 404:e.message="\u8bf7\u6c42\u5730\u5740\u51fa\u9519: ".concat(e.response.config.url);break;case 408:e.message="\u8bf7\u6c42\u8d85\u65f6";break;case 500:e.message="\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef";break;case 501:e.message="\u670d\u52a1\u672a\u5b9e\u73b0";break;case 502:e.message="\u7f51\u5173\u9519\u8bef";break;case 503:e.message="\u670d\u52a1\u4e0d\u53ef\u7528";break;case 504:e.message="\u7f51\u5173\u8d85\u65f6";break;case 505:e.message="HTTP\u7248\u672c\u4e0d\u53d7\u652f\u6301"}return f(e),n&&setTimeout((function(){sessionStorage.removeItem(i.n),t.push("/"),t.go()}),1e3),Promise.reject(e)}))}function f(e){s.ZP.error(e.message)}d(l),d(c),d(u)},697:function(e,t,n){n.d(t,{EN:function(){return l},Lc:function(){return c},R5:function(){return o},U7:function(){return s},h9:function(){return d},iE:function(){return r},iQ:function(){return i},jE:function(){return u}});var a=n(7111),r=function(e){return(0,a.nL)({url:"/case-type/list",data:e,method:"post"})},s=function(e){return(0,a.nL)({url:"/case-type/save",data:e,method:"post"})},o=function(e){return(0,a.nL)({url:"/case-type/remove",data:e,method:"post"})},i=function(e){return(0,a.nL)({url:"/case-type-definition/list",data:e,method:"post"})},c=function(e){return(0,a.nL)({url:"/case-execution/create",data:e,method:"post"})},l=function(e){return(0,a.nL)({url:"/case-execution/list",data:e,method:"post"})},u=function(e){return(0,a.nL)({url:"/case-execution/complete",data:e,method:"post"})},d=function(e){return(0,a.nL)({url:"/case-execution/handle",data:e,method:"post"})}},9989:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var a=n(9439),r=n(2791),s=n(6435),o=n(3272),i=n(3099),c=n(7309),l=n(6038),u=n(8678),d=n(2014),f=n(498),m=n(1413),p=n(697),h=n(1294),v=n(141),x=n(63),g=n(9163),Z=n(6106),y=n(914),b=n(9220),j=n(7528),w=n(184),C=(v.Z.TabPane,x.Z.Panel),T=function(e){var t=(0,r.useState)({}),n=(0,a.Z)(t,2),s=n[0],i=n[1],u=(0,r.useState)([]),d=(0,a.Z)(u,2),f=d[0],v=d[1],T=(0,r.useState)([]),k=(0,a.Z)(T,2),S=k[0],I=k[1];(0,r.useEffect)((function(){console.log(e),i(e.data),v(e.caseTypeData),I(e.data.steps?e.data.steps.map((function(e){return e.id})):[])}),[]),(0,r.useEffect)((function(){console.log(s)}),[s]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(g.Z,{title:"\u529e\u7406\u6848\u4ef6",className:"site-page-header",subTitle:"\u8bbe\u7f6e\u6848\u4ef6\u5df2\u5b8c\u6210\u4e8b\u4ef6",extra:[(0,w.jsx)(l.Z,{placement:"left",title:"\u786e\u8ba4\u4fdd\u5b58\u5417\uff1f",onConfirm:function(){var t={entity:s};(0,p.h9)(t).then((function(t){e.onSaveSuccess()}))},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",disabled:2===s.status,children:(0,w.jsx)(c.Z,{disabled:2===s.status,children:"\u4fdd\u5b58"})},"1")],avatar:{src:h},onBack:function(){return e.onExit()},children:(0,w.jsx)(o.Z,{layout:"vertical",children:(0,w.jsxs)(Z.Z,{gutter:16,className:"case-form-row",justify:"space-between",children:[(0,w.jsxs)(y.Z,{span:9,className:"case-form-area",children:[(0,w.jsx)(o.Z.Item,{label:"\u7c7b\u578b",children:f&&f.length>0?f.find((function(e){return e.id===s.typeId})).name:""}),(0,w.jsx)(o.Z.Item,{label:"\u540d\u79f0",children:s.name}),(0,w.jsx)(o.Z.Item,{label:"\u521b\u5efa\u65f6\u95f4",children:s.createdTime}),(0,w.jsx)(o.Z.Item,{label:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",children:s.lastmodifiedTime})]}),(0,w.jsxs)(y.Z,{span:15,className:"case-form-area",children:[(0,w.jsx)("span",{style:{fontWeight:600},children:"\u6b65\u9aa4\u53ca\u4e8b\u9879"}),(0,w.jsx)(x.Z,{activeKey:S,onChange:function(e){I(e)},className:"case-form-step-data",style:{marginTop:"10px"},expandIconPosition:"left",children:s.steps?s.steps.map((function(e){return(0,w.jsx)(C,{header:e.name,collapsible:"header",extra:(0,w.jsx)("span",{children:e.suspect}),children:e.caseTypeStepItems&&e.caseTypeStepItems.length>0?e.caseTypeStepItems.map((function(t){return 1===t.status?(0,w.jsx)(b.Z,{placement:"topLeft",title:t.lawTitle,color:"gold",arrowPointAtCenter:!0,children:(0,w.jsx)(j.Z,{className:"edit-tag",closable:1===s.status,onClose:function(){return n=e.id,a=t.id,void i((0,m.Z)((0,m.Z)({},s),{},{steps:s.steps.map((function(e){return e.id===n?(0,m.Z)((0,m.Z)({},e),{},{caseTypeStepItems:e.caseTypeStepItems.map((function(e){return a===e.id?(0,m.Z)((0,m.Z)({},e),{},{status:2}):e}))}):e}))}));var n,a},children:t.name},t.id)},t.name):""})):""},e.id)})):[]})]})]})})})})},k=n(9201),S=s.Z.Option,I=[{label:"\u8fdb\u884c\u4e2d",value:"1"},{label:"\u5df2\u5b8c\u6210",value:"2"}],E=function(){var e=o.Z.useForm(),t=(0,a.Z)(e,1)[0],n=(0,r.useState)(!1),m=(0,a.Z)(n,2),h=m[0],v=m[1],x=(0,r.useState)([]),g=(0,a.Z)(x,2),Z=g[0],y=g[1],b=(0,r.useState)(null),j=(0,a.Z)(b,2),C=j[0],E=j[1],N=(0,r.useState)(1),P=(0,a.Z)(N,2),z=P[0],L=P[1],O=(0,r.useState)(10),R=(0,a.Z)(O,2),F=R[0],V=R[1],U=(0,r.useState)([]),B=(0,a.Z)(U,2),H=B[0],K=B[1],q=(0,r.useState)(null),D=(0,a.Z)(q,2),G=D[0],_=D[1];(0,r.useEffect)((function(){J(),X()}),[]);var J=function(){(0,p.iE)({entity:{},pageNum:0,pageSize:1e3,orderBy:"id asc"}).then((function(e){K(e.rows)}))},Q=function(){_(null)},X=function(){v(!0);var e=t.getFieldsValue(),n={entity:{typeId:e.typeId,name:e.name,suspects:e.suspects,createdBy:null==sessionStorage.getItem(k.n)?null:JSON.parse(sessionStorage.getItem(k.n)).id},where:e.status&&e.status.length>0?[{field:"status",opt:"in",value:e.status.join()}]:[{field:"status",opt:"in",value:"1,2"}],pageNum:z-1,pageSize:F,orderBy:"createdTime desc"};(0,p.EN)(n).then((function(e){console.log(e),y(e.rows),E(e.total)})),v(!1)},A=[{title:"\u540d\u79f0",dataIndex:"name",onHeaderCell:function(e){e.align="center"}},{title:"\u7c7b\u578b",onHeaderCell:function(e){e.align="center"},render:function(e,t){var n=H.find((function(e){return e.id===t.typeId}));return n?n.name:""},width:120},{title:"\u73af\u8282\u6570\u91cf",onHeaderCell:function(e){e.align="center"},render:function(e,t){return t.steps.length},width:80},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdTime",onHeaderCell:function(e){e.align="center"},width:180},{title:"\u72b6\u6001",dataIndex:"status",onHeaderCell:function(e){e.align="center"},render:function(e,t){return 1===t.status?(0,w.jsx)("span",{style:{color:"green"},children:"\u8fdb\u884c\u4e2d"}):2===t.status?(0,w.jsx)("span",{style:{color:"Gray"},children:"\u5df2\u5b8c\u6210"}):void 0},width:60},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return(0,w.jsxs)(i.Z,{size:"middle",children:[(0,w.jsx)(c.Z,{size:"small",onClick:function(){return function(e){_(e)}(t)},children:"\u529e\u7406"}),1===t.status?(0,w.jsx)(l.Z,{placement:"left",title:"\u786e\u5b9a\u5b8c\u6210\u8be5\u6848\u4ef6\u5417\uff1f",onConfirm:function(){return function(e){var t={entity:{id:e.id}};(0,p.jE)(t).then((function(e){X()}))}(t)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,w.jsx)(c.Z,{size:"small",children:"\u5b8c\u6210"})}):""]})},align:"center",width:100}];return null==G?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(o.Z,{form:t,initialValues:{status:["1","2"]},layout:"inline",className:"search-form",onFinish:function(e){X()},children:[(0,w.jsx)(o.Z.Item,{name:"typeId",label:"\u7c7b\u578b",children:(0,w.jsxs)(s.Z,{style:{width:"160px"},size:"small",children:[(0,w.jsx)(S,{value:"",children:"\u8bf7\u9009\u62e9"}),H.map((function(e){return(0,w.jsx)(S,{value:e.id,children:e.name},e.id)}))]})}),(0,w.jsx)(o.Z.Item,{name:"name",label:"\u540d\u79f0",children:(0,w.jsx)(u.Z,{maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",size:"small"})}),(0,w.jsx)(o.Z.Item,{name:"suspects",label:"\u5bf9\u8c61",children:(0,w.jsx)(u.Z,{maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u5bf9\u8c61",size:"small"})}),(0,w.jsx)(o.Z.Item,{name:"status",label:"\u72b6\u6001",children:(0,w.jsx)(d.Z.Group,{options:I})}),(0,w.jsx)(o.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,w.jsx)(c.Z,{type:"primary",size:"small",htmlType:"submit",children:"\u67e5\u8be2"})})]}),(0,w.jsx)(f.Z,{columns:A,dataSource:Z,loading:h,pagination:{position:["bottomRight"],total:C,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171".concat(e,"\u6761")},size:"small",current:z,pageSize:F,onChange:function(e,t){L(e),V(t),X()}},scroll:{scrollToFirstRowOnChange:!0,x:!0},bordered:"true",size:"small",rowKey:"id",rowSelection:{type:"checkbox",onChange:function(e,t,n){console.log("selectedRowKeys",e),console.log("selectedRows",t),console.log("info",n)}}})]}):(0,w.jsx)(T,{data:G,caseTypeData:H,onExit:Q,onSaveSuccess:function(){Q(),X()}})}},9201:function(e,t,n){n.d(t,{G:function(){return r},n:function(){return a}});var a="loginUserToken",r="consoleNavigateTabs"},1783:function(e,t,n){var a=n(7462),r=n(9439),s=n(2791),o=n(8368),i=n(7309),c=n(2571);function l(e){return!(!e||!e.then)}t.Z=function(e){var t=s.useRef(!1),n=s.useRef(),u=(0,o.Z)(!1),d=(0,r.Z)(u,2),f=d[0],m=d[1];s.useEffect((function(){var t;if(e.autoFocus){var a=n.current;t=setTimeout((function(){return a.focus()}))}return function(){t&&clearTimeout(t)}}),[]);var p=e.type,h=e.children,v=e.prefixCls,x=e.buttonProps;return s.createElement(i.Z,(0,a.Z)({},(0,c.n)(p),{onClick:function(n){var a=e.actionFn,r=e.close;if(!t.current)if(t.current=!0,a){var s;if(e.emitEvent){if(s=a(n),e.quitOnNullishReturnValue&&!l(s))return t.current=!1,void r(n)}else if(a.length)s=a(r),t.current=!1;else if(!(s=a()))return void r();!function(n){var a=e.close;l(n)&&(m(!0),n.then((function(){m(!1,!0),a.apply(void 0,arguments),t.current=!1}),(function(e){console.error(e),m(!1,!0),t.current=!1})))}(s)}else r()},loading:f,prefixCls:v},x,{ref:n}),h)}},6038:function(e,t,n){var a=n(7462),r=n(9439),s=n(2791),o=n(1694),i=n.n(o),c=n(5179),l=n(187),u=n(1354),d=n(9220),f=n(7309),m=n(2571),p=n(3486),h=n(3578),v=n(9077),x=n(7924),g=n(1113),Z=n(9464),y=n(1783),b=void 0,j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},w=s.forwardRef((function(e,t){var n=s.useContext(v.E_).getPrefixCls,o=(0,c.Z)(!1,{value:e.visible,defaultValue:e.defaultVisible}),l=(0,r.Z)(o,2),w=l[0],C=l[1],T=function(t,n){var a;C(t,!0),null===(a=e.onVisibleChange)||void 0===a||a.call(e,t,n)},k=function(e){T(!1,e)},S=function(t){var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(b,t)},I=function(t){var n;T(!1,t),null===(n=e.onCancel)||void 0===n||n.call(b,t)},E=e.prefixCls,N=e.placement,P=e.children,z=e.overlayClassName,L=j(e,["prefixCls","placement","children","overlayClassName"]),O=n("popover",E),R=n("popconfirm",E),F=i()(R,z),V=s.createElement(p.Z,{componentName:"Popconfirm",defaultLocale:h.Z.Popconfirm},(function(t){return function(t,r){var o=e.okButtonProps,i=e.cancelButtonProps,c=e.title,l=e.cancelText,u=e.okText,d=e.okType,p=e.icon,h=e.showCancel,v=void 0===h||h;return s.createElement("div",{className:"".concat(t,"-inner-content")},s.createElement("div",{className:"".concat(t,"-message")},p,s.createElement("div",{className:"".concat(t,"-message-title")},(0,x.Z)(c))),s.createElement("div",{className:"".concat(t,"-buttons")},v&&s.createElement(f.Z,(0,a.Z)({onClick:I,size:"small"},i),l||r.cancelText),s.createElement(y.Z,{buttonProps:(0,a.Z)((0,a.Z)({size:"small"},(0,m.n)(d)),o),actionFn:S,close:k,prefixCls:n("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},u||r.okText)))}(O,t)})),U=n();return s.createElement(d.Z,(0,a.Z)({},L,{prefixCls:O,placement:N,onVisibleChange:function(t){e.disabled||T(t)},visible:w,overlay:V,overlayClassName:F,ref:t,transitionName:(0,Z.mL)(U,"zoom-big",e.transitionName)}),(0,g.Tm)(P,{onKeyDown:function(e){var t,n;s.isValidElement(P)&&(null===(n=null===P||void 0===P?void 0:(t=P.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===u.Z.ESC&&w&&T(!1,e)}(e)}}))}));w.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:s.createElement(l.Z,null),disabled:!1},t.Z=w},1294:function(e,t,n){e.exports=n.p+"static/media/new-case.5deb2e5ace8ffe565deb.jpg"}}]);
//# sourceMappingURL=989.761a77be.chunk.js.map